#include <iostream>
#include "Image_Class.h"

using namespace std;

Image rotated_image(Image img ,Image final_img, string filename , string file_last_name)
{
    cout << "Please choose what degree adjustment do you want?" <<"\n"<< "90 degree - 180 degree - 270 degree" << endl;
    int x;
    while (true) {
        cin >> x;

        if (x == 90 || x == 180 || x == 270) {
            if (x == 90)
            {
                final_img = Image(img.height, img.width); 
                for (int i = 0; i < img.width; i++)
                {
                    for (int j = 0; j < img.height; j++) 
                    {
                        int new_x = img.height - 1 - j;
                        int new_y = i;
                        for (int c = 0; c < 3; c++)
                        {
                            final_img(new_x, new_y, c) = img(i, j, c);
                        }
                    }
                }
                final_img.saveImage(file_last_name);
                return final_img;
            }
            else if (x == 180) 
            {
                final_img = Image(img.width, img.height); 
                for (int i = 0; i < img.width; i++)
                {
                    for (int j = 0; j < img.height; j++) 
                    {
                        int new_x = img.width - 1 - i;
                        int new_y = img.height - 1 - j;
                        for (int c = 0; c < 3; c++)
                        {
                            final_img(new_x, new_y, c) = img(i, j, c);
                        }
                    }
                }
                final_img.saveImage(file_last_name);
                return final_img;
            }
            else if (x == 270)
            {
                final_img = Image(img.height, img.width); 
                for (int i = 0; i < img.width; i++)
                {
                    for (int j = 0; j < img.height; j++) 
                    {
                        int new_x = j;
                        int new_y = img.width - 1 - i;
                        for (int c = 0; c < 3; c++)
                        {
                            final_img(new_x, new_y, c) = img(i, j, c);
                        }
                    }
                }
                final_img.saveImage(file_last_name);
                return final_img;
            }
        }
        else {
            cout << "Invalid input. Please enter 90, 180, or 270:" << endl;
        }
    }
}
int main()
{
    string filename , file_last_name;
    cout << " plz enter the file name with format" <<endl;
    cin >> filename;
    Image img(filename);
    cout <<" plz enter the new name with the new format" << endl;
    cin >> file_last_name; 
    Image final_img; 
    rotated_image(img, final_img, filename, file_last_name);
    return 0;
}
